<html>
  <head>
    <link rel="stylesheet" href="./app.css" />
  </head>

  <body>
    <script id="vertexShader" type="x-shader/x-vertex">
      uniform sampler2D voxelNormals;
      uniform float voxelCount;
      uniform vec3 sunColor;
      uniform vec3 lightDir;
      uniform vec3 ambient;
      attribute vec3 color;
      attribute uint voxelIndex;
      varying vec3 vColor;

      void main() {
        vec2 uv = vec2(float(voxelIndex) / voxelCount, 0.5);
        vec3 nor = texture2D(voxelNormals, uv).xyz;
        float diff = clamp(dot(lightDir, nor), 0.0, 1.0);
        float sky_dif = sqrt(clamp(0.5 + 0.5 * dot(-nor, vec3(0.0, 1.0, 0.0)), 0.0, 1.0));

        vec3 col = vec3(0.0);

        col += color * diff * sunColor * 0.8;
        col += color * sky_dif * vec3(1.0, 1.40, 2.00);
        col += color * ambient;

        vColor = col;

        gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
      }
    </script>
    <script id="fragmentShader" type="x-shader/x-fragment">
      varying vec3 vColor;

      void main() {
        gl_FragColor = vec4(vColor, 1.0);;
      }
    </script>
    <div id="root">
      <script src="./src/index.tsx"></script>
    </div>
  </body>
</html>
